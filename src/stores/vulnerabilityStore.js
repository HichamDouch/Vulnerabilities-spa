import { defineStore } from 'pinia'
import vulnerabilities from '../data/Vulnerabilities'

export const useVulnerabilityStore = defineStore('vulnerabilityStore', {
    state : () => {
        return {
            vulnerabilities
        }
    },
    actions : {
        addPost(post) {
            post.truncat = post.description.substring(0,250);
            post.id = Math.floor(Math.random() * 100)
            this.vulnerabilities.push(post)
            this.router.push('/')
        },
        updatePost(post){
            const postIndex = this.vulnerabilities.findIndex(item => item.id == post.id)
            this.vulnerabilities[postIndex] = post
            this.router.push('/')
        },
        deletePost(id){
            const postIndex = this.vulnerabilities.findIndex(item => item.id == id)
            this.vulnerabilities.splice(postIndex,1)
        }

        
    },
    getters : {
        getPosts(state){ return state.vulnerabilities},
        getPost(state) { return (id) => state.vulnerabilities.find(item => item.id == id) }

    }
})